<?xml version="1.0" encoding="UTF-8"?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Intermidia.Pages.Mobilivendas.Shared.CabecalhoView"
             xmlns:localEfeccts="clr-namespace:Intermidia.Utils.Effects">
    <ContentView.Content>

        <StackLayout Orientation="Horizontal"
                     BackgroundColor="{StaticResource corPrimaria}"
                     Margin="0,10,0,0"
                     Padding="0,5,0,0">

            <Grid HorizontalOptions="FillAndExpand"
                  VerticalOptions="FillAndExpand">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="1.4*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="70" />
                </Grid.RowDefinitions>

                <!-- ==========================
                     PRIMEIRO BLOCO (ICONE + USER + VERSÃO)
                     ========================== -->
                <Grid Grid.Row="0" Grid.Column="0" RowSpacing="0">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!-- Imagem substituindo FFImageLoading -->
                    <Image Grid.Row="0"
                           Grid.RowSpan="2"
                           Grid.Column="0"
                           HorizontalOptions="Start"
                           VerticalOptions="Center"
                           Source="{Binding Icone}"
                           Margin="10,0"
                           Aspect="AspectFit">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding LogoCommand}" />
                        </Image.GestureRecognizers>
                    </Image>

                    <Label Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2"
                           x:Name="usuario"
                           FontFamily="{StaticResource RobotoNormalFont}"
                           FontSize="12"
                           Text="Usuário:RXXX"
                           LineBreakMode="TailTruncation"
                           VerticalOptions="FillAndExpand"
                           VerticalTextAlignment="End"
                           TextColor="{StaticResource corFontCabecalho}" />

                    <Label Grid.Row="1" Grid.Column="1"
                           x:Name="versao"
                           FontFamily="{StaticResource RobotoNormalFont}"
                           FontSize="12"
                           Text="Versão:0.029"
                           LineBreakMode="TailTruncation"
                           VerticalOptions="CenterAndExpand"
                           VerticalTextAlignment="End"
                           TextColor="{StaticResource corFontCabecalho}" />

                    <Image Grid.Row="1" Grid.Column="2"
                           Source="logo_mobilivendas_black.png"
                           BackgroundColor="Transparent"
                           Aspect="AspectFit"
                           WidthRequest="70"
                           VerticalOptions="Center"
                           HorizontalOptions="Start" />

                </Grid>

                <!-- ==========================
                     BOTÃO FLEX (ATENDIMENTO)
                     ========================== -->
                <Grid Grid.Row="0"
                      Grid.Column="1"
                      RowSpacing="0"
                      ColumnSpacing="0">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <StackLayout Grid.Row="0"
                                 Grid.RowSpan="3"
                                 Grid.Column="0"
                                 BackgroundColor="{StaticResource corFontCabecalho}"
                                 Padding="2"
                                 Margin="2,5">

                        <Picker
                            Title="Atendimento"
                            ItemsSource="{Binding ListaAtendimentos}"
                            SelectedItem="{Binding AtendimentoSelecionado}"
                            TextColor="{StaticResource corFontCabecalho}"
                            FontSize="10.5"
                            BackgroundColor="{StaticResource corPrimaria}" />

                    </StackLayout>

                </Grid>

                <!-- ==========================
                     BOTÕES (Senha / Sync / Logoff)
                     ========================== -->
                <StackLayout Grid.Row="0"
                             Grid.Column="2"
                             Orientation="Horizontal"
                             Spacing="5">

                    <!--<Button ImageSource="alterar_senha.png"
                            Text="Senha"
                            TextColor="{StaticResource corFontCabecalho}"
                            BackgroundColor="Transparent"
                            HorizontalOptions="EndAndExpand"
                            FontFamily="{StaticResource RobotoNormalFont}"
                            Command="{Binding PopupAlterarSenhaCommand}">
                        <Button.Effects>
                            <localEfeccts:TabDisableEffect />
                        </Button.Effects>
                    </Button>-->

                    <Button ImageSource="sincronizacao.png"
                            Text="Sync"
                            TextColor="{StaticResource corFontCabecalho}"
                            BackgroundColor="Transparent"
                            HorizontalOptions="EndAndExpand"
                            FontFamily="{StaticResource RobotoNormalFont}"
                            Command="{Binding SincronizarCommand}">
                        <Button.Effects>
                            <localEfeccts:TabDisableEffect />
                        </Button.Effects>
                    </Button>

                    <Button ImageSource="btn_logoff.png"
                            Text="Logoff"
                            TextColor="{StaticResource corFontCabecalho}"
                            BackgroundColor="Transparent"
                            HorizontalOptions="End"
                            FontFamily="{StaticResource RobotoNormalFont}"
                            Command="{Binding SairCommand}">
                        <Button.Effects>
                            <localEfeccts:TabDisableEffect />
                        </Button.Effects>
                    </Button>

                </StackLayout>

            </Grid>
        </StackLayout>
    </ContentView.Content>
</ContentView>